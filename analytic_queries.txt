
TODO: Number of Unqiue Anon Users who have used the product (IDE or General Chat)
"""
select
	unique_anon_user_id
from 
	public.learning_assistant_usercode

UNION DISTINCT

select
	unique_anon_user_id
from 
	public.learning_assistant_usergeneraltutorconversation
"""

TODO: Number of Users who have signed up
"""
select
	t1.user_auth_obj_id,
	t2.email
from 
	public.learning_assistant_usercode t1
left join
	public.learning_assistant_useroauth t2
	on t2.id = t1.user_auth_obj_id

UNION DISTINCT

select
	t1.user_auth_obj_id,
	t2.email
from 
	public.learning_assistant_usergeneraltutorconversation t1
left join
	public.learning_assistant_useroauth t2
	on t2.id = t1.user_auth_obj_id
"""

TODO: Number of IDE Code Files Created by Each User (Anon + Authenticated)
"""
select 
	unique_anon_user_id,
	user_auth_obj_id,
	t2.email,
	count(t1.id)
from 
	public.learning_assistant_usercode t1
left join
	public.learning_assistant_useroauth t2
	on t2.id = t1.user_auth_obj_id
group by
	1, 2, 3
"""

TODO: IDE Code Files with Number of Messages by Each User (Anon + Authenticated)
"""
select
	t1.unique_anon_user_id,
	t1.user_auth_obj_id,
	t3.email,
	t1.id as code_file_id,
	count(t2.id) as num_messages
from
	public.learning_assistant_usercode t1
left join
	public.learning_assistant_userconversation t2
	on t2.code_obj_id = t1.id
left join
	public.learning_assistant_useroauth t3
	on t3.id = t1.user_auth_obj_id
group by
	1, 2, 3, 4
"""

TODO: Number of Messages Sent by Each Anon User in General Chat
"""
select
	t1.unique_anon_user_id,
	count(t1.id)
from
	public.learning_assistant_usergeneraltutorconversation t1
group by
	1
"""

TODO: Number of Parent Conversation Objects + Number of Messages in each of those objects, for each Authenticated User
"""
select 
	t1.user_auth_obj_id,
	t2.email,
	t1.id as parent_conversation_id,
	count(t3.id) as num_messages
from
	public.learning_assistant_usergeneraltutorparent t1
left join
	public.learning_assistant_useroauth t2
	on t2.id = t1.user_auth_obj_id
left join
	public.learning_assistant_usergeneraltutorconversation t3
	on t3.chat_parent_object_id = t1.id
group by
	1, 2, 3
"""

