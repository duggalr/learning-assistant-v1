{% extends 'base.html' %}
{% load static %}

{% block content %}

{% include 'app_menu.html' %}
{% include 'left_side_bar.html' %}

<!-- Desktop Grid View -->
<div class="ui grid tutor_chat_parent_container" style="display: none;">

    <div class="three wide column"></div>

    <div class="eleven wide column" style="margin-left: 5.5%; margin-top: 0.5%;">
        
        <h3 class="ui header tutor_chat_header">
            <span>&#127922;</span>&nbsp;&nbsp;Chat
        </h3>
        
        <span class="tutor_helper_span">
            Visit our <a href="{% url 'playground' %}">code editor</a>, if you would like to run your code and get help from the AI, as needed.
            <a href="{% url 'login' %}">Signup</a> to save your conversations.
        </span>

        <div class="desktop-tutor-chat-container" id="general-chat-div">

            <div class="tutor-chat-message">

                <strong>
                    Welcome! &nbsp; &#128588&nbsp;
                    I'm your personal learning assistant. 
                </strong>
                <br/><br/>
                My goal is to help you on your learning journey, whether you need help with homework or want to explore a CS topic.
                <br/><br/>
                If you need help knowing where to start in a new field, feel free to ask me and I will help construct your
                learning plan, along with questions or quizzes to ensure you have a deep understanding of the concepts.
            </div>

            <hr>
            <br/>

            {% if current_conversation_list|length > 0 %}

                {% for ucs_obj in current_conversation_list %}
                            
                    <div class="tutor-chat-message" style="white-space: pre-line;"><b>You: </b>{{ ucs_obj.question | safe }}</div>
                    <div class="tutor-chat-message" style="white-space: pre-line;"><b>GPT-4: </b>{{ ucs_obj.response | safe }}</div>

                {% endfor %}

            {% endif %}

        </div>

        <div class="tutor-chat-input-container">

            <div class="ui form" style="width: 100%;">
                <div class="field">
                    <textarea rows="2" id="general_tutor_chatInput" class="input-box form-control" placeholder="ask away..."></textarea>
                </div>                    
            </div>
            &nbsp;
            <button id="sendButton" class="ui primary button disabled send-button">Send</button>
            <button class="ui primary loading button" id="primary_loading_button" style="display: none;">Loading</button>

            {% if current_conversation_list|length > 0 %}
                <input type="hidden" id="general_cs_chat_parent_obj_id" name="general_cs_chat_parent_obj_id" value="{{ current_conversation_parent_object.id }}">
            {% else %}
                <input type="hidden" id="general_cs_chat_parent_obj_id" name="general_cs_chat_parent_obj_id">
            {% endif %}

        </div>

        <span style="font-size: 12px; color: gray; padding-bottom: 20px;">
            Answer Response usually takes 15-30 seconds. (this will get better soon...)
        </span>

    </div>

</div>    


<!-- Tablet Grid View -->
<div class="ui grid mobile_tutor_chat_parent_container" style="display: none;">

    <div class="six wide column"></div>

    <div class="nine wide column">

        <h3 class="ui header tutor_chat_header">
            <span>&#127922;</span>&nbsp;&nbsp;Chat
        </h3>        

        <span class="tutor_helper_span">
            Visit our <a href="{% url 'playground' %}">code editor</a>, if you would like to run your code and get help from the AI, as needed.
            <a href="{% url 'login' %}">Signup</a> to save your conversations.
        </span>

        <div class="mobile-tutor-chat-container" id="general-chat-div">

            <div class="tutor-chat-message">

                <strong>
                    Welcome! &nbsp; &#128588&nbsp;
                    I'm your personal learning assistant. 
                </strong>
                <br/><br/>
                My goal is to help you on your learning journey, whether you need help with homework or want to explore a CS topic.
                <br/><br/>
                If you need help knowing where to start in a new field, feel free to ask me and I will help construct your
                learning plan, along with questions or quizzes to ensure you have a deep understanding of the concepts.
            </div>

            <hr>
            <br/>

            {% if current_conversation_list|length > 0 %}

                {% for ucs_obj in current_conversation_list %}
                            
                    <div class="tutor-chat-message" style="white-space: pre-line;"><b>You: </b>{{ ucs_obj.question | safe }}</div>
                    <div class="tutor-chat-message" style="white-space: pre-line;"><b>GPT-4: </b>{{ ucs_obj.response | safe }}</div>

                {% endfor %}

            {% endif %}

        </div>

        <div class="tutor-chat-input-container">

            <div class="ui form" style="width: 100%;">
                <div class="field">
                    <textarea rows="2" id="general_tutor_chatInput" class="input-box form-control" placeholder="ask away..."></textarea>
                </div>                    
            </div>
            &nbsp;
            <button id="sendButton" class="ui primary button disabled send-button">Send</button>
            <button class="ui primary loading button" id="primary_loading_button" style="display: none;">Loading</button>

            {% if current_conversation_list|length > 0 %}
                <input type="hidden" id="general_cs_chat_parent_obj_id" name="general_cs_chat_parent_obj_id" value="{{ current_conversation_parent_object.id }}">
            {% else %}
                <input type="hidden" id="general_cs_chat_parent_obj_id" name="general_cs_chat_parent_obj_id">
            {% endif %}

        </div>

        <span style="font-size: 12px; color: gray; padding-bottom: 20px;">
            Answer Response usually takes 15-30 seconds. (this will get better soon...)
        </span>
        
    </div>

</div>



<script>

    
</script>


{% endblock %}

